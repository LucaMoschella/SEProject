%PERCHE' USARE LE MACRO
%1) Usando le macro possiamo stabili la formattazione "logica" del documento,
%   rendendo possibile cambiare le convenzioni adottate mantenendo la coerenza
%2) Definire comandi abbreviati per semplificare comandi con opzioni complese ripetute più volte
%3) Senza esagerare, definire testo da inserire in automatico senza riscriverlo ogni volta


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FORMATTAZIONE LOGICA %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Il documento indicato è quello in cui sono state definite per la prima volta le macro, poi riutilizzate anche in altri documenti. 
%(Un minimo di organizzazione senno impazzisco)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di richiesta %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di visione %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%ruolo nel sistema visitatori, etc. (visione, specifica sistema)
\newcommand{\ruolo}[1]{\emph{#1}} 

%autenticate o non autenticate (documenti di visione)
\newcommand{\stato}[1]{\emph{#1}} 

%intestazioni nelle tabelle generiche
\newcommand{\tabhead}[1]{\textsc{#1}} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di fattibilità %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%tecnologie necessarie
\newcommand{\tecnologia}[1]{\emph{#1}} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di contratto %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%matricola (e titolo)
\newcommand{\matricola}[1]{\textit{#1}}

%email (e titolo)
\newcommand{\email}[1]{\texttt{#1}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di pianificazione %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%fase di sviluppo (inception, etc.)
\newcommand{\fase}[1]{\textsf{#1}} 

%workflow di sviluppo (raccolta requisiti, etc.)
\newcommand{\workflow}[1]{\emph{#1}} 

%larghezza tabelle iterazione
\newcommand{\tabwidthiter}{\textwidth} 

%titolo tabelle iterazioni 
\newcommand{\tabtitleiter}[1]{\textbf{#1}} 

%campo tabelle iterazioni 
\newcommand{\tabheaditer}[1]{\textsc{#1}} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di specifica sistema %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%gruppi di ruoli (figure pubbliche, etc.)
\newcommand{\grupporuolo}[1]{\textsl{#1}} 

%campo di informazione nel prodotto
\newcommand{\infoProdotto}[1]{\emph{#1}} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% documento di specifica requisiti %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%descrizione campi delle tabelle dei requisiti
\newcommand{\campiTabReq}[1]{\emph{#1}} 

%descrizione campi degli identificatori dei requisiti
\newcommand{\campiIdReq}[1]{\emph{#1}} 

%formattazione requisiti - non mette link
\newcommand{\reqsep}{.} 
\newcommand{\displayReq}[1]{\texttt{#1}} 
\newcommand{\req}[4]{\displayReq{#1\reqsep#2\reqsep#3\reqsep#4}} 
\newcommand{\subreq}[5]{\displayReq{#1\reqsep#2\reqsep#3\reqsep#4\reqsep#5}} 
\newcommand{\subsubreq}[6]{\displayReq{#1\reqsep#2\reqsep#3\reqsep#4\reqsep#5\reqsep#6}} 

%Creazione dei contatori per la gestione automatica dei requisiti
\newcounter{req}
\newcounter{sottoreq}[req]
\newcounter{sottosottoreq}[sottoreq]

%Funzione per resettare i contatori al cambio di categoria
\newcommand{\countReset}{%
\setcounter{req}{0}%
\setcounter{sottoreq}{0}%
\setcounter{sottosottoreq}{0}%
}


%Macro per linkare requisiti
%separatore id titolo
\newcommand{\sepIDTitle}{ - }

%macro per creare un nuovo requisito, usando i vari contatori
%usage: \reqItem{reqkey}{\ereq{ ...ID... }}{titolo} 
\newcommand\reqItem[3]{\hyperref[desc:#1]{#2\phantomsection\label{id:#1}}\sepIDTitle\reqtit{#3}\phantomsection\label{title:#1}}

%macro per creare la definizione, unica, di un requisito già esistente
%usage: \reqDef{reqkey}
\newcommand\reqDef[1]{\ref{id:#1}\phantomsection\label{desc:#1}}

%macro per stampare (e linkare, tranne il titolo) informazioni del req.
%usage: \reqGet..{reqkey}
\newcommand\reqGetID[1]{\ref{id:#1}}
\newcommand\reqGetTitle[1]{\ref*{title:#1}}
\newcommand\reqGetDesc[1]{\hyperref[desc:#1]{\ref*{id:#1}}}
\newcommand\reqGetIDTitle[1]{\ref{id:#1}\sepIDTitle\ref*{title:#1}}

%fa ma in modo che la label attuale contenga il titolo (e non il numero di sezione)
\makeatletter
\newcommand{\reqtit}[1]{%
    \def\@currentlabel{#1}%
    #1%
}
\makeatother

%macro per gestire i requisiti, e sotto requisiti vari.
%Oltre a formattare il requisito con \req (è in pratica un wrapper di req), 
%fa in modo che anche la label contenga la giusta formattazione del requisito.
\makeatletter
\newcommand{\ereq}[3]{%
    \stepcounter{req}%
    \def\@currentlabel{\req{#1}{#2}{#3}{\arabic{req}}}%
    \req{#1}{#2}{#3}{\arabic{req}}%
}
\makeatother

\makeatletter
\newcommand{\esubreq}[3]{%
    \stepcounter{sottoreq}%
    \def\@currentlabel{\subreq{#1}{#2}{#3}{\arabic{req}}{\arabic{sottoreq}}}%
	\subreq{#1}{#2}{#3}{\arabic{req}}{\arabic{sottoreq}}%
}
\makeatother

\makeatletter
\newcommand{\esubsubreq}[3]{%
    \stepcounter{sottosottoreq}%
    \def\@currentlabel{\subsubreq{#1}{#2}{#3}{\arabic{req}}{\arabic{sottoreq}}{\arabic{sottosottoreq}}}%
	\subsubreq{#1}{#2}{#3}{\arabic{req}}{\arabic{sottoreq}}{\arabic{sottosottoreq}}%
}
\makeatother

%deprecated, inutilmente complicato. (Principio di funzionamento: sovrascrive il modo di riferirsi a contatori. Penso.)
%Funzione per creare il prossimo requisito, creare una label a cui punterà la defnizione, linkare la definizione.
%Usage: \command{tipo}{contesto}{categoria}{keyrequisito}
%\newcommand*\ereq[4]{\def\thereq{#1.#2.#3.\arabic{req}}\refstepcounter{req}\hyperref[definizione#4]{\thereq}\phantomsection\label{elenco#4}} 
%\newcommand*\esubreq[4]{\def\thesottoreq{#1.#2.#3.\arabic{req}.\arabic{sottoreq}}\refstepcounter{sottoreq}\hyperref[definizione#4]{\thesottoreq}\phantomsection\label{elenco#4}} 
%\newcommand*\esubsubreq[4]{\def\thesottosottoreq{#1.#2.#3.\arabic{req}.\arabic{sottoreq}.\arabic{sottosottoreq}}\refstepcounter{sottosottoreq}\hyperref[definizione#4]{\thesottosottoreq}\phantomsection\label{elenco#4}} 

%Funzione per stampare il nome del requisito associato alla label: keyrequisito
%Linka l'elemento nell'elenco, e fa in modo di essere linkato dall'elenco
%\newcommand{\refElencoFromDef}[1]{\ref{elenco#1}\phantomsection\label{definizione#1}}

%Funzione per stampare il nome del requisito associato alla label: keyrequisito
%Linka l'elemento nell'elenco.
%\newcommand{\refElenco}[1]{\ref{elenco#1}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% INDICE ANALITICO %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%indiicizzare e inserire contemporaneamente
\newcommand{\iindex}[1]{#1\index{#1}} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% RIFERIMENTI %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%a documenti
\newcommand{\docref}[1]{\nameref{#1} \vpageref{#1}} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% MATEMATICA %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%insiemi numerici
\newcommand{\numberset}{\mathbb}
\newcommand{\N}{\numberset{N}}
\newcommand{\R}{\numberset{R}}

%lettere strane
\renewcommand{\epsilon}{\varepsilon}
\renewcommand{\theta}{\vartheta}
\renewcommand{\rho}{\varrho}
\renewcommand{\phi}{\varphi}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% TABELLE GENERICHE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%larghezza tabelle revisione - non usata (se con poco testo viene brutta)
\newcommand{\tabwidthrev}{0.8\textwidth} 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  AMBIENTI %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%toglie il bold dalle label delle descrizioni
\renewcommand{\descriptionlabel}[1]{\textsf{#1}}


%lista descrption dove c'è una leggera indentazione.
\newenvironment{descriptionInd}{\begin{description}[leftmargin=1.5cm,labelindent=1cm]}{\end{description}}

%lista descrption dove la descrizione va a capo.
\newenvironment{descriptionNext}{\begin{description}[style=nextline]}{\end{description}}
        %signatura: \newenvironment{name}[num]{before}{after}

%lista numerata inseribile dentro tabelle
\newenvironment{enumWork}
{
	\begin{minipage}[t]{\linewidth}
		\begin{enumerate*}[itemjoin={\newline}]
		}
		{
		\end{enumerate*}
	\end{minipage}
}

%lista itemize inseribile dentro tabelle
\newenvironment{itemWork}
{
	\begin{minipage}[t]{\linewidth}
		\begin{itemize}[nosep, leftmargin=*]
		}
		{
		\end{itemize}
	\end{minipage}
}